# 结构体

PS：与[C语言结构体](../C语言/9.结构体.md "C语言结构体")一样，但不太一样。直接当成两个东西使用吧

C语言结构体的特点：

1. 只能有 **数据**，不能有函数
2. 不能有构造 / 析构
3. 不能继承
4. 不能访问控制



## 定义

直接用`.`成员运算符访问，不需要要 `->`，也不需要`(*p).`，简化了访问

```c++
struct Person {            // 简单记忆法： struct Person = class
    int age;
    char name[20];
};

int main()
{
    Person p;              // C++ 中可以省略 struct
    p.age = 18;            // 直接用.成员运算符访问，不需要要 ->，也不需要(*p).，简化了访问
}
```



## 1.`C++ struct` 可以有「函数」

```c++
#include <iostream>
using namespace std;

struct Person {
    int age;

    void sayHello() {
        cout << "age = " << age << endl;
    }
};

int main()
{
    Person p;
    p.age = 20;
    p.sayHello();
}
```



### 结构体数组

```c++
struct Person {
    int age;
    std::string name;
};

Person people[3] = {
    {18, "Tom"},
    {20, "Jack"},
    {22, "Lucy"}
};

// const auto& = const Person&
for (const auto& p : people) {
    std::cout << p.name << std::endl;
}
// 每次循环都复制一个 Person，但是可以修改值
for (Person p : people) {
    p.age += 1;   // 不影响原数据
}
```

`const auto&` =「自动推导类型的只读引用」，**只是引用，性能更好**

| 部分    | 含义                 |
| ------- | -------------------- |
| `auto`  | 让编译器自动推导类型 |
| `&`     | 引用，不拷贝         |
| `const` | 只读，不能修改       |



## 2.构造函数

```c++
struct Person {
    int age;

    Person(int a) : age(a) {}
};

Person p(18);
```



## 3.继承

```c++
struct Student : Person {
    int score;
};
```



## 4.访问控制

```c++
struct Person {
public:
    int age;
private:
    int secret;
};
```

