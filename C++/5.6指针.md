# 指针

```c++
int* p;
long long* q;

// 打印指针的大小，与系统有关（指针存储的是数据存放的地址，所以指针的大小是计算机系统记录内存地址的大小）
cout << sizeof(p) << endl;         // 8，64位系统输出8，32位系统输出4
cout << sizeof(q) << endl;         // 8，64位系统输出8，32位系统输出4
```



## 初始化指针

```c++
int* p = nullptr;             // 定义空指针 方式1，使用这个
p = NULL;                     // 定义空指针 方式2
p = 0;                        // 定义空指针 方式3
```



##### 野指针

定义了指针一定要有指向，没有指向的指针成为野指针，使用野指针会直接报错（感觉类似于`undefined.a`），所以一定要有指向

##### `void*`指针

`void*`指针可以指向任意类型的指针，但是不能对它进行访问

`void*`指针的作用：只能进行**地址的存放**和**比较**

```c++
int i = 0;
char s = '0';

void* v = &i;
void* v = &s;
cout << *v << endl;    // 报错
```



## 二级指针

```c++
int a = 10;
int* p = &a;      // 或者 int* p; p = &a;
int** pp = &p;

cout << **pp << " " << *p << " " << a << endl;     // 10 10 10
cout << *pp << " " << p << " " << &a << endl;      // 000000E2C2B4FA64 000000E2C2B4FA64 000000E2C2B4FA64
cout << pp << endl;                                // 000000E2C2B4FA88 

// 那么
// **pp = *p = a = 10     // 值
// *pp = p = &a;          // a 的地址，p = a的地址
// pp = &p = &&a;         // pp = p 的地址
```

| 变量   | 值       | 地址（假设） | 解释         | 对应数组（比喻）         |
| ------ | -------- | ------------ | ------------ | ------------------------ |
| `a`    | `10`     | `0x1111`     | `a = 10`     | `int a[][];`（假设定义） |
| `**pp` | `10`     | `0x1111`     | `**pp = 10`  | `a[0][0]`                |
| `*pp`  | `0x1111` | `0x2222`     | `*pp = 1111` | `a[0]`                   |
| `pp`   | `0x2222` |              | `pp = 2222`  | `a`                      |

使用`ts`比喻二级指针的使用方式

```typescript
let a = {a: 0}        // a.a = 0
let b = {a: 1}        // b.a = 1

a = b                 // 相当于修改pp的值
console.log(a.a)      // 1
```



# 常量指针

1. 常量指针`const int*`。指针只能指向`const`常量

   ```c++
   const int a = 10;
   const int b = 20;
   
   const int* p = &a;
   p = &b;
   
   cout << *p << endl;         // 20
   ```

2. 指针常量`int* const`，指针不能被修改

   ```c++
   int a = 10;
   int b = 20;
   int* const p = &a;
   
   //p = &b;               指针不能被重新赋值
   
   *p = 30;                // 变量可以被修改（把这个地址的值改成了 30）
   cout << *p << endl;     // 30
   cout << a << endl;      // 30 要注意的是 a 的值也被改成了 30
   ```

3. 指向常量的指针常量`const int* const`

   ```c++
   const int a = 10;
   
   const int* const p = &a;
   ```



# 指针和数组

```c++
int arr[3] = { 1, 2, 3 };

int* p = arr;

cout << *p << endl;          // 1

p++;

cout << *p << endl;         // 2

cout << endl;
```



### 指针数组和数组指针

1. 指针数组

   ```c++
   int* p[5];
   
   cout << sizeof(p) << endl;       // 40，表示5个指针
   ```

2. 数组指针

   指向**整个数组**（==**指向数组的指针**==）

   ```c
   int arr[5] = {1, 2, 3, 4, 5};
   // sizeof(arr) = 20，数组占据的大小
   
   int(* p)[5] = &arr;  // p 是指向数组的指针
   // sizeof(p) = 8，指针占据的大小
   ```



