# 浏览器文件下载常见方式

### 1.a 标签 + download 属性（前端生成文件 / 已知 URL）

适用于：前端生成 Blob 文件 或 直接下载已有 URL 链接文件。

```typescript
const blob = new Blob(['Hello, world!'], { type: 'text/plain' })
const url = URL.createObjectURL(blob)

const a = document.createElement('a')
a.href = url
a.download = 'hello.txt'  // 下载文件名
a.click()

URL.revokeObjectURL(url)  // 释放内存
```



### 2.window.open / window.location.href（用于后端提供的文件下载链接）

适用于：下载链接为真实地址（带 token 的 URL、导出接口链接等）

```
// 方法1
window.open('https://example.com/download?id=123')

// 方法2
window.location.href = 'https://example.com/download?id=123'
```

但注意：某些浏览器可能会拦截 `window.open`，尤其是异步触发时。



### 3.fetch + Blob + a 标签（用于需要鉴权的下载请求）

适用于：需要携带 headers、POST 请求、鉴权下载的场景。

```typescript
fetch('/api/download', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        Authorization: 'Bearer token'
    },
    body: JSON.stringify({ id: 123 })
})
.then(res => res.blob())
.then(blob => {
    const url = URL.createObjectURL(blob)
    const a = document.createElement('a')
    a.href = url
    a.download = 'file.xlsx'
    a.click()
    URL.revokeObjectURL(url)
})
```